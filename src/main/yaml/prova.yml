incarnation: sapere

variables:
  time: &time
    type: Flag
    parameters: [false]
  speed: &speed
    language: kotlin
    formula: "if (time as Boolean) 0 else 1"
  seed: &seed
    min: 0
    max: 199
    step: 1
    default: 0

environment:
  type: OSMEnvironment
  parameters: [mirabilandia.osm.pbf, true]

network-model: { type: ConnectWithinDistance, parameters: [1000] }

seeds:
  scenario: *seed
  simulation: *seed

_restaurants: &restaurants
  - type: Point
    parameters: [44.33747, 12.26208]
    contents:
      - molecule: name
        concentration: "Drive-In"
      - molecule: activity
      - molecule: restaurant
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33815, 12.2633]
    contents:
      - molecule: name
        concentration: "Bar del Lago"
      - molecule: activity
      - molecule: restaurant
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33682, 12.26425]
    contents:
      - molecule: name
        concentration: "Locanda del Faro"
      - molecule: activity
      - molecule: restaurant
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33589, 12.26293]
    contents:
      - molecule: name
        concentration: "McDonald's"
      - molecule: activity
      - molecule: restaurant
      - molecule: "{queue, 0}"

_attractions: &attractions
  - type: Point
    parameters: [44.33691, 12.26136]
    contents:
      - molecule: name
        concentration: "iSpeed"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33908, 12.26462]
    contents:
      - molecule: name
        concentration: "RioBravo"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33852, 12.26238]
    contents:
      - molecule: name
        concentration: "Raratonga"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33719, 12.26472]
    contents:
      - molecule: name
        concentration: "Delirium"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33793, 12.26698]
    contents:
      - molecule: name
        concentration: "Katun"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33831, 12.26194]
    contents:
      - molecule: name
        concentration: "AutoSplash"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33698, 12.26281]
    contents:
      - molecule: name
        concentration: "Casa Matta"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33539, 12.26133]
    contents:
      - molecule: name
        concentration: "DiVertical"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.33734, 12.26611]
    contents:
      - molecule: name
        concentration: "Phobia"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"
  - type: Point
    parameters: [44.3368, 12.2656]
    contents:
      - molecule: name
        concentration: "Columbia"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"

_monosaurus: &monosaurus
  - type: Point
    parameters: [44.33779, 12.26401]
    contents:
      - molecule: name
        concentration: "Monosaurus"
      - molecule: activity
      - molecule: attraction
      - molecule: "{queue, 0}"

_behavior: &behavior
  - time-distribution:
      type: DiracComb
      parameters: [1.0]
    type: CognitiveBehavior

_pools:
  - pool: &move
      - time-distribution: 10
        type: Event
        actions:
          - type: MoveToTarget
            parameters: [*monosaurus, *speed]

_mirabilandia: &mira
  [[44.338, 12.26],[44.335, 12.263],[44.337, 12.268],[44.34, 12.266],[44.34, 12.264],[44.34, 12.262]]

_guests: &guests
  - type: Polygon
    parameters: [ 1, *mira ]
    properties:
      - type: CognitivePedestrian
    contents:
      - molecule: person
      - molecule: guest
      - molecule: time
        concentration: *time
      - molecule: speed
        concentration: *speed
    programs:
      - *behavior

deployments:
  - *restaurants
  - *attractions
  - *monosaurus
  - *guests
