incarnation: protelis

variables:
  visitorNumber: &visitorNumber
    formula: 100            # number of visitor groups
  rate: &rate
    formula: 0.3            # time unit (once every 3 seconds)
  lowRate: &lowRate
    formula: rate / 60
  highFrequency: &highFrequency

# The network model used allows to choose the nodes that have the "attraction" molecule in order to simulate an access point behaviour
network-model:
  type: ClosestAccessPoint
  parameters: [attraction, 150.0]

# Use an OpenStreetMap Environment, deploying nodes only on streets
environment:
  type: OSMEnvironment
  parameters: [mirabilandia.osm.pbf, true]

# Define the physical bounds of the park
_bounds: &bounds
  [[44.338, 12.26],[44.335, 12.263],[44.337, 12.268],[44.34, 12.266],[44.34, 12.264],[44.34, 12.262]]

# Define the movement law with a Walker that moves only on streets towards
# a GeoPosition indicated by the concentration of the tracking molecule.
# On average, considering different ages, a person can walk at a speed of about 1.35 meters per second.
_move: &move
  - time-distribution: *rate
    type: Event
    actions:
      - type: TargetMapWalker
        parameters: [org:protelis:microcity:destination, 1] # meters per second

# Define the broadcast message from attractions to visitors
# to spread their positions
_positions: &positions
  - time-distribution: *rate
    program: org:protelis:microcity:aggregatePositions
  - program: send

# Define the rule that establishes how visitors choose the
# next destination
_destination: &destination
  - time-distribution: *rate
    program: org:protelis:microcity:destination
  - program: send

# Define the message that visitors send when they get to
# an attraction in order to enqueue themselves
_queue: &queue
  - time-distribution: *rate
    program: org:protelis:microcity:queue
  - program: send

# Define the broadcast message from attractions to visitors
# to spread their queues
_queues: &queues
  - time-distribution: *rate
    program: org:protelis:microcity:aggregateQueues
  - program: send

# Define the action of satisfying enqueued visitors
_satisfaction: &satisfaction
  - time-distribution:
      type: MoleculeDefinedDiracComb
      parameters: [satisfaction-frequency]
    program: org:protelis:microcity:satisfaction
  - program: send

# Generates a recommendation for the visitor
_recommendation: &recommendation
  - time-distribution: *lowRate
    program: org:protelis:microcity:recommendation
  - program: send

# Generates a recommendation for the visitor
_evaluateRecommendation: &evaluateRecommendation
  - time-distribution: *rate
    program: org:protelis:microcity:evaluateRecommendation
  - program: send

# Establishes whether the visitor is moving or not
_moving: &moving
  - time-distribution: *rate
    program: org:protelis:microcity:moving
  - program: send

# Creates groups of visitors with different cardinalities randomly chosen from 1 to 6.
_cardinality: &cardinality
  - time-distribution:
      type: Trigger
      parameters: [0.0]
    program: org:protelis:microcity:cardinality
  - program: send

# Define the programs that all visitors need to implement
_visitorPrograms: &visitorPrograms
  - *move
  - *destination
  - *recommendation
  - *evaluateRecommendation
  - *positions
  - *queue
  - *queues
  - *satisfaction
  - *moving
  - *cardinality

# Define the programs that all the attractions need to implement
_attractionPrograms: &attractionPrograms
  - *positions
  - *queue
  - *queues
  - *satisfaction

# Define visitors
_visitors: &visitors
  - type: Polygon
    parameters: [ *visitorNumber, *bounds ]
    programs: *visitorPrograms
    contents:
      - { molecule: visitor, concentration: true }
      - { molecule: satisfied, concentration: true }
      - { molecule: satisfactions, concentration: 0 }
      - { molecule: next-policy, concentration: "\"lazyPopular\"" }
      - { molecule: recommendation-policy, concentration: "\"situatedRecommendation\"" }
      - { molecule: waiting-time, concentration: 0 } # seconds
      - { molecule: moving, concentration: false }
      - { molecule: previous-destination, concentration: [] }
      - { molecule: satisfaction-frequency, concentration: *rate }

# Define attractions
_attractions: &attractions
  - type: Point
    parameters: [44.33747, 12.26208]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"restaurant\"" }
      - { molecule: capacity, concentration: 10 } # amount of people per round
      - { molecule: popularity, concentration: 3 } # review stars (out of 5)
      - { molecule: name, concentration: "\"Drive-In\"" }
      - { molecule: satisfaction-frequency, concentration: *lowRate }
  - type: Point
    parameters: [ 44.33815, 12.2633 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"restaurant\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Bar del Lago\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33682, 12.26425 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"restaurant\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Locanda del Faro\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33589, 12.26293 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"restaurant\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"McDonald's\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33679, 12.26153]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 5 }
      - { molecule: name, concentration: "\"iSpeed\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.339, 12.26475]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 5 }
      - { molecule: name, concentration: "\"Rio Bravo\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33861, 12.26225]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Raratonga\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33719, 12.26472]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Delirium\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33927, 12.26615]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 5 }
      - { molecule: name, concentration: "\"Katun\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33861, 12.26225]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Autosplash\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33579, 12.26133]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 4 }
      - { molecule: name, concentration: "\"DiVertical\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33734, 12.26611]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Phobia\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.3368, 12.2656]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Columbia\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [44.33779, 12.26399]
    programs: *attractionPrograms
    contents:
      - { molecule: leader, concentration: true }
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Monosaurus\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33981, 12.2654 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Master Thai\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33896, 12.26327 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Desmo Race\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.3391, 12.26335 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Kiddy Monster\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33922, 12.26328 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Diavel Ring\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33935, 12.26324 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Scrumbler Run\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33911, 12.26314 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Experience Building\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33547, 12.26279 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 4 }
      - { molecule: name, concentration: "\"Blue River\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.3365, 12.26194 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Las Vegas\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33666, 12.26241 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Mini Cars\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33692, 12.26213 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Naxcar\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33799, 12.26254 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Mini Stunt\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33703, 12.26269 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Casa Matta\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33696, 12.26288 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Flying Arturo\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33677, 12.26278 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Fantasy Land\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33647, 12.26294 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Santa Fe Express\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33674, 12.26306 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"Carousel\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33749, 12.26245 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Mini Rapide\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33759, 12.26284 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Leprotto Express\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33716, 12.26288 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Arkade\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33727, 12.26452 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Reptilium\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33743, 12.26489 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Bicisauro\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33754, 12.26542 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Rexplorer\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33755, 12.26509 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 1 }
      - { molecule: name, concentration: "\"BrontoCars\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33782, 12.26465 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Raptotana\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33696, 12.26486 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Fort Alamo\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33672, 12.2652 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Buffalo Bill Rodeo\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.3368, 12.26556 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 5 }
      - { molecule: name, concentration: "\"Oil Towers\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33699, 12.26582 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Geronimo Towers\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.3372, 12.26572 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Aquila Tonante\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33769, 12.26609 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 4 }
      - { molecule: name, concentration: "\"Pakal\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33844, 12.26585 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 4 }
      - { molecule: name, concentration: "\"El Dorado Falls\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33923, 12.2618 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 2 }
      - { molecule: name, concentration: "\"Euro Will\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33594, 12.26255 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 3 }
      - { molecule: name, concentration: "\"Aquaqua\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }
  - type: Point
    parameters: [ 44.33514, 12.26233 ]
    programs: *attractionPrograms
    contents:
      - { molecule: attraction, concentration: true }
      - { molecule: attraction-type, concentration: "\"ride\"" }
      - { molecule: capacity, concentration: 10 }
      - { molecule: popularity, concentration: 4 }
      - { molecule: name, concentration: "\"Reset\"" }
      - { molecule: satisfaction-frequency, concentration: 0.1 }

# Deploy nodes
deployments:
  - *attractions
  - *visitors

export:
  - type: CSVExporter
    parameters:
      fileNameRoot: "satisfactions"
      exportPath: "data"
      interval: 100.0 # seconds
    data:
      - time
      - type: SatisfactionsExporter
  - type: CSVExporter
    parameters:
      fileNameRoot: "waitingTime"
      exportPath: "data"
      interval: 100.0 # seconds
    data:
      - time
      - type: WaitingTimeExporter

# Terminate the simulation after 5000 seconds
terminate:
  - type: AfterTime
    parameters: 5000 # seconds
