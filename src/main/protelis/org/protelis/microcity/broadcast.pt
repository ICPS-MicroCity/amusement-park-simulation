module org:protelis:microcity:broadcast

def position() = self.getDevicePosition()
def id() = self.getDeviceUID().getId()
def tuple() = [id(), position()]
def neighbors() = nbr(tuple())

let positions = [tuple()]

share(m <- positions) {
    foldUnion([neighbors()]).sort()
}