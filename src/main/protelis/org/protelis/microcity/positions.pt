module org:protelis:microcity:positions
import microcity.Device.*

def tuple() = [getID().getId(), getPosition()]
def isActivity() = has("activity")

def positions() =
    if (isActivity()) {
        [tuple()]
    } else {
        []
    }

share (field <- positions()) {
    foldUnion(field).sort()
}
